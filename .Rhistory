git_sitrep()
library(usethis)
library(gitcreds)
library(gert)
git_sitrep()
git_sitrep()
library(usethis)
library(gitcreds)
library(gert)
git_sitrep()
usethis::git_default_branch_rediscover()
usethis::git_default_branch_rediscover()
git config pull.rebase false
usethis::git_default_branch_rediscover()
devtools::document()
read.csv(2024_ma.csv)
read.csv("2024_ma.csv")
read.csv("raw_data/2024_ma")
read.csv("/raw_data/2024_ma")
setwd("~/Documents/epar")
read.csv("raw_data/2024_ma")
read.csv("raw_data/2024_ma.csv")
epa <- read.csv("/raw_data/2024_ma.csv")
epa <- read.csv("raw_data/2024_ma.csv")
View(epa)
clean_names(epa)
epa <- clean_names(epa)
View(epa)
use_data(table512.xls)
library(usethis)
use_data("table512.xls")
gov_budget <- readxl("raw_data/table512.xls")
install.packages("readxl")
ov_budget <- readxl("raw_data/table512.xls")
library(readxl)
gov_budget <- readxl("raw_data/table512.xls")
?readxl
library(readxl)
library(readxl)
gov_budget <- readxl("raw_data/table512.xls")
gov_budget <- read_excel("raw_data/table512.xls")
View(gov_budget)
gov_budget <- clean_names(gov_budget)
View(gov_budget)
gov_budget <- na.omit(gov_budget)
View(epa)
epa |> group_by(county) |> summarize(chems = count(x37_chemical))
epa |> group_by(x7_county) |> summarize(chems = count(x37_chemical))
epa |> group_by(x7_county) |> summarize(n(x37_chemical))
epa |> group_by(x7_county) |> summarize(n_chems = n(x37_chemical))
epa |> group_by(x7_county) |> summarize(n = countif(x38_elemental_metal_included))
epa |> group_by(x7_county) |> filter(x46_carcinogen == "YES")
temp <- epa |> group_by(x7_county) |> filter(x46_carcinogen == "YES")
View(temp)
temp <- epa |> group_by(x7_county) |> summarize(sum = sum(x46_carcinogen == "YES")))
temp <- epa |> group_by(x7_county) |> summarize(sum = sum(x46_carcinogen == "YES"))
View(temp)
temp <- epa |> group_by(x7_county) |> summarize(sum = sum(x46_carcinogen))
epa |>
group_by(county) |>
summarize(percent_carcinogen = sum(x46_carcinogen == YES) / nrow())
temp <- epa |> group_by(x7_county) |> summarize(percent_carcinogen = sum(x46_carcinogen == YES) / nrow())
temp <- epa |> group_by(x7_county) |> summarize(percent_carcinogen = sum(x46_carcinogen == "YES") / nrow())
temp <- epa |> group_by(x7_county) |> summarize(percent_carcinogen = sum(x46_carcinogen == "YES") / n())
View(temp)
temp <- epa |> group_by(x7_county) |> summarize(percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100)
View(temp)
View(temp)
temp <- epa |> group_by(x7_county) |> summarize(num_chems = nrow(x7_county), percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100)
View(temp)
temp <- epa |> group_by(x7_county) |> summarize(num_chems = n(), percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100)
temp <- epa |> group_by(x7_county) |> summarize(num_chems = n(), percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100, percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100)
View(temp)
new_temp <- epa |> group_by(county) |> summarize(com_sector = n(x23_industry_sector))
new_temp <- epa |> group_by(x7_county) |> summarize(com_sector = n(x23_industry_sector))
new_temp <- epa |> group_by(x7_county) |> summarize(com_sector = nrow(x23_industry_sector))
View(new_temp)
new_temp <- epa |> group_by(x7_county) |> summarize(com_sector = count(x23_industry_sector))
new_temp <- epa |> group_by(x7_county) |> summarize(com_sector = n_distinct(x23_industry_sector))
library(dplyr)
new_temp <- epa |> group_by(x7_county) |> summarize(com_sector = n_distinct(x23_industry_sector))
new_temp <- epa |> group_by(x7_county) |> summarize(sum = sum(x23_industry_sector))
new_temp <- epa |> filter(x7_county == "HAMPDEN") |> group_by(x23_industry_sector) |> summarize(sum = n())
new_temp <- epa |> filter(x7_county == "HAMPDEN") |> group_by(x23_industry_sector) |> summarize(sum = n()) |> arrange(desc(sum))
new_temp <- epa |>
filter(x7_county == "HAMPDEN") |>
group_by(x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum))
new_temp <- epa |>
filter(x7_county == "HAMPDEN") |>
group_by(x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1)
map(epa$x7_county, filter)
library(purrr)
map(epa$x7_county, filter)
new_temp <- epa |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n())
new_temp <- epa |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum))
new_temp <- epa |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1)
new_temp <- epa |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
map()
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = x7_county)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
}
chemstats(epa, "county")
chemstats(epa, county)
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = x7_county)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
}
chemstats(epa, "county")
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = x7_county)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
}
chemstats(epa, "county")
View(epa)
chemstats(epa, "county")
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
temp <- epa |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- epa |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = x7_county)
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
browser()
result <- data |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = x7_county)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
}
chemstats(epa, "county")
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
chemstats(epa, "county")
chemstats(epa, "county")
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
# |>
# left_join(temp,
#           by = x7_county)
}
chemstats(epa, "county")
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
# |>
# left_join(temp,
#           by = x7_county)
return(result)
}
chemstats(epa, "county")
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = nrow(x7_county),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = join_by(x7_county))
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
return(result)
}
chemstats(epa, "county")
result <- chemstats(epa, "county")
View(result)
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = n(),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = join_by(x7_county))
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
return(result)
}
result <- chemstats(epa, "county")
?left_join
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_chems = n(),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = join_by(x7_county)) |>
rename(top_industry = x23_industry_sector)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
return(result)
}
result <- chemstats(epa, "county")
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_releases = n(),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = join_by(x7_county)) |>
rename(top_industry = x23_industry_sector)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
return(result)
}
chemstats <- function(data, area = c("county", "city", "zip")) {
if (area == "county") {
temp <- data |>
group_by(x7_county, x23_industry_sector) |>
summarize(sum = n()) |>
arrange(desc(sum)) |>
slice(1) |>
select(!sum)
result <- data |>
group_by(x7_county) |>
summarize(num_releases = n(),
percent_carcinogen = (sum(x46_carcinogen == "YES") / n())*100,
percent_hazard = (sum(x42_clean_air_act_chemical == "NO") / n())*100) |>
left_join(temp,
by = join_by(x7_county)) |>
rename(top_industry = x23_industry_sector)
}
# else if (area == "city") {
#
# } else if (area == "zip") {
#
# }
return(result)
}
result <- chemstats(epa, "county")
View(result)
devtools::document()
