git_sitrep()
library(usethis)
library(gitcreds)
library(gert)
git_sitrep()
?sort
x <- c("b", "a", "d")
sort(x)
y <- c(1,2,5,3,2)
sort(y)
w <- (T,T,F,T)
w <- c(T,T,F,T)
typeof(w)
sort(w)
max(x) - min(x)
max(y) - min(y)
max(w) - min(w)
max(w)
max(w)
min(w)
install.packages('etasFLP')
library(etasFLP)
dir.create("epar/R")
get_wd()
getwd()
use_r("county_plot")
library(usethis)
use_r("county_plot")
county_plot <- function(data, county) {
g <- filtered <- data |>
filter(x7_county == county) |>
group_by(x23_industry_sector) |>
summarize(number = n()) |>
ggplot(aes(x = fct_reorder(x23_industry_sector, number, .desc = TRUE), y = number)) +
geom_col() +
labs(x = "Industry sector", y = "Number of facility chemical releases",
title = paste0(county, " Industry Releases")) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
return(g)
}
epa_data <- read.csv("raw_data/2024_ma.csv")
epa_data
county_plot <- function(data, county) {
g <- filtered <- data |>
filter(x7_county == county) |>
group_by(x23_industry_sector) |>
summarize(number = n()) |>
ggplot(aes(x = fct_reorder(x23_industry_sector, number, .desc = TRUE), y = number)) +
geom_col() +
labs(x = "Industry sector", y = "Number of facility chemical releases",
title = paste0(county, " Industry Releases")) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
return(g)
}
county_plot(epa_data, "ESSEX")
library(ggplot2)
library(dplyr)
county_plot(epa_data, "ESSEX")
library(janitor)
clean_names(epa_data)
epa_data <- clean_names(epa_data)
county_plot(epa_data, "ESSEX")
library(forcats)
county_plot(epa_data, "ESSEX")
View(epa_data)
county_plot <- function(data, county) {
data <- clean_names(data)
g <- filtered <- data |>
filter(x7_county == county) |>
group_by(x23_industry_sector) |>
summarize(number = n()) |>
ggplot(aes(x = fct_reorder(x23_industry_sector, number, .desc = TRUE), y = number)) +
geom_col() +
labs(x = "Industry sector", y = "Number of facility chemical releases",
title = paste0("Industry Releases", county, ", ", x8_st)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
return(g)
}
county_plot(epa_data, "ESSEX")
county_plot <- function(data, county) {
data <- clean_names(data)
g <- filtered <- data |>
filter(x7_county == county) |>
group_by(x23_industry_sector) |>
summarize(number = n()) |>
ggplot(aes(x = fct_reorder(x23_industry_sector, number, .desc = TRUE), y = number)) +
geom_col() +
labs(x = "Industry sector", y = "Number of facility chemical releases",
title = paste0("Industry Releases", county, ", ", data$x8_st[[1]])) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
return(g)
}
county_plot(epa_data, "ESSEX")
county_plot(epa_data, "ESSEX")
county_plot <- function(data, county) {
data <- clean_names(data)
g <- filtered <- data |>
filter(x7_county == county) |>
group_by(x23_industry_sector) |>
summarize(number = n()) |>
ggplot(aes(x = fct_reorder(x23_industry_sector, number, .desc = TRUE), y = number)) +
geom_col() +
labs(x = "Industry sector", y = "Number of facility chemical releases",
title = paste0("Industry Releases in ", county, ", ", data$x8_st[[1]])) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
return(g)
}
county_plot(epa_data, "ESSEX")
devtools::document()
devtools::document()
rm(county_plot)
devtools::document()
rm(county_plot)
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
use_build_ignore(raw_data)
use_build_ignore("raw_data")
?n
devtools::document()
devtools::document()
devtools::document()
?.data
devtools::document()
epa <- read.csv("raw_data/2024_ma.csv")
names(epa)
View(epa)
epa <- clean_names(epa)
library(janitor)
library(janitor)
epa <- clean_names(epa)
ggplot(epa, aes(x = x46_carcinogen)) +
geom_bar()
library(ggplot2)
ggplot(epa, aes(x = x46_carcinogen)) +
geom_bar()
sub1 <- epa[1:410]
sub1 <- epa[,1:410]
sub1 <- epa[1:122,1:410]
sub1 <- epa[1:410]
sub1 <- epa[1:410,]
sub2 <- epa[411:820,]
?case_when
epa <- epa |>
mutate(indicator = case_when(
x6_city == BOSTON ~ 1,
x6_city != BOSTON ~ 0
))
library(dplyr)
epa <- epa |>
mutate(indicator = case_when(
x6_city == BOSTON ~ 1,
x6_city != BOSTON ~ 0
))
epa <- epa |>
mutate(indicator = case_when(
x6_city == "BOSTON" ~ 1,
x6_city != "BOSTON" ~ 0
))
View(epa)
model <- glm(carcin ~ indicator, family = "binomial", data = epa)
epa <- epa |>
mutate(indicator = case_when(
x6_city == "BOSTON" ~ 1,
x6_city != "BOSTON" ~ 0
)) |>
mutate(carcin = case_when(
x46_carcinogen == "NO" ~ 0,
x46_carcinogen == "YES" ~ 1
))
model <- glm(carcin ~ indicator, family = "binomial", data = epa)
summary(model)
df <- epa |>
group_by(indicator) |>
summarize(n = n(carcin))
df <- epa |>
group_by(indicator) |>
summarize(n = sum(carcin))
df
epa <- epa |>
mutate(indicator = case_when(
x23_industry_sector == "Chemicals" ~ 1,
x23_industry_sector != "Chemicals" ~ 0
)) |>
mutate(carcin = case_when(
x46_carcinogen == "NO" ~ 0,
x46_carcinogen == "YES" ~ 1
))
df <- epa |>
group_by(indicator) |>
summarize(n = sum(carcin))
df
model <- glm(carcin ~ indicator, family = "binomial", data = epa)
summary(model)
df
df <- epa |>
group_by(indicator) |>
summarize(n = sum(carcin), prop = sum(carcin) / n())
df
model <- glm(prop ~ indicator, family = "binomial", data = df, weights = n)
df
df <- epa |>
group_by(indicator) |>
summarize(n =n(),
prop = mean(carcin))
df
model <- glm(prop ~ indicator, family = "binomial", data = df, weights = n)
summary(model)
exp(-0.52)
table(epa$x37_chemical)
data(epa)
epa <- read.csv("raw_data/2024_ma.csv")
library(janitor)
epa <- clean_names(epa)
epa_ma <- epa
View(epa_ma)
table(epa_ma$x37_chemical)
epa_tx <- read.csv("raw_data/2024_tx.csv")
table(epa_tx$x37_chemical)
epa_tx <- clean_names(epa_tx)
table(epa_tx$x37_chemical)
cor(epa_ma$x42_clean_air_act_chemical, epa_ma$x46_carcinogen)
?cor
mod <- glm(x46_carcinogen ~ x42_clean_air_act_chemical, data = epa_ma, family = binomial("logit"))
epa <- epa |>
mutate(indicator = case_when(
x23_industry_sector == "Chemicals" ~ 1,
x23_industry_sector != "Chemicals" ~ 0
)) |>
mutate(carcin = case_when(
x46_carcinogen == "NO" ~ 0,
x46_carcinogen == "YES" ~ 1
))
library(dplyr)
library(ggplot2)
epa <- epa |>
mutate(indicator = case_when(
x23_industry_sector == "Chemicals" ~ 1,
x23_industry_sector != "Chemicals" ~ 0
)) |>
mutate(carcin = case_when(
x46_carcinogen == "NO" ~ 0,
x46_carcinogen == "YES" ~ 1
))
df <- epa |>
group_by(indicator) |>
summarize(n = n(),
prop = mean(carcin))
model <- glm(prop ~ indicator, family = "binomial", data = df, weights = n)
summary(model)
epa_ma |>
summarize(total = sum(x107_total_releases))
epa_ma |>
group_by(x50_unit_of_measure) |>
summarize(total = sum(x107_total_releases))
epa_tx |>
group_by(x50_unit_of_measure) |>
summarize(total = sum(x107_total_releases))
